{"ast":null,"code":"import _toConsumableArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SaisieMessage(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var currentDate=new Date();var date=currentDate.toLocaleDateString(\"fr\");var clock=currentDate.getHours()+\":\"+currentDate.getMinutes();var getContent=function getContent(evt){return setText(evt.target.value);};var submissionHandler=function submissionHandler(evt){evt.preventDefault();setError(null);var data={text:text,date:date+\" \"+clock};axios.post(\"playlist/comment/\".concat(props.playlistId),data,{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){console.log(res.data);setText(\"\");props.setCommentaires([].concat(_toConsumableArray(props.commentaires),[data]));}).catch(function(err){console.log(err.response.data);setError(err.response.data);});};return/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"texte-msg\",rows:\"5\",cols:\"33\",placeholder:\"Entrez votre message ici\",onChange:getContent,value:text}),/*#__PURE__*/_jsxs(\"p\",{className:\"date\",children:[clock,\" · \",date]}),error&&/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\",fontSize:\"12px\"},children:[error.message,\" \",error.detail]}),/*#__PURE__*/_jsx(\"button\",{onClick:submissionHandler,children:\"Post\"})]})});}","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","SaisieMessage","props","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","error","setError","currentDate","Date","date","toLocaleDateString","clock","getHours","getMinutes","getContent","evt","target","value","submissionHandler","preventDefault","data","post","concat","playlistId","headers","withCredentials","credentials","then","res","console","log","setCommentaires","_toConsumableArray","commentaires","catch","err","response","className","children","rows","cols","placeholder","onChange","style","color","fontSize","message","detail","onClick"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/SaisieMessage.js"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function SaisieMessage(props) {\n  const [text, setText] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const currentDate = new Date();\n  const date = currentDate.toLocaleDateString(\"fr\");\n  const clock = currentDate.getHours() + \":\" + currentDate.getMinutes();\n\n  const getContent = (evt) => setText(evt.target.value);\n\n  const submissionHandler = (evt) => {\n    evt.preventDefault();\n    setError(null);\n    const data = {\n      text: text,\n      date: date + \" \" + clock,\n    };\n    axios\n      .post(`playlist/comment/${props.playlistId}`, data, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        console.log(res.data);\n        setText(\"\");\n        props.setCommentaires([...props.commentaires, data]);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n        setError(err.response.data);\n      });\n  };\n\n  return (\n    <div className=\"message\">\n      <form>\n        <textarea\n          className=\"texte-msg\"\n          rows=\"5\"\n          cols=\"33\"\n          placeholder=\"Entrez votre message ici\"\n          onChange={getContent}\n          value={text}\n        />\n        <p className=\"date\">\n          {clock}\n          {\" · \"}\n          {date}\n        </p>\n        {error && (\n          <p style={{ color: \"red\", fontSize: \"12px\" }}>\n            {error.message} {error.detail}\n          </p>\n        )}\n        <button onClick={submissionHandler}>Post</button>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}