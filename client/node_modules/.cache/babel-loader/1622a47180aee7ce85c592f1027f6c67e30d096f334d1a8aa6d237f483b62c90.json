{"ast":null,"code":"import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"../CSS/styles.css\";import\"../CSS/formulaire.css\";import\"../CSS/message.css\";import logo from\"../Images/BeatAdvisorLogo.png\";import fond from\"../Images/fond.jpg\";import axios from\"axios\";import NavigationPanel from\"./NavigationPanel.js\";import Login from\"./Login\";import Register from\"./Register\";import HomePage from\"./HomePage\";import PageProfil from\"./PageProfil\";import EditerProfil from\"./EditerProfil\";import ListePlaylists from\"./ListePlaylists\";import BackgroundAudio from\"./BackgroundAudio.js\";import ost0 from\"../Musiques/ost0.mp3\";import ost1 from\"../Musiques/ost1.mp3\";import ost2 from\"../Musiques/ost2.mp3\";import ost3 from\"../Musiques/ost3.mp3\";import ost4 from\"../Musiques/ost4.mp3\";import ost5 from\"../Musiques/ost5.mp3\";import ost6 from\"../Musiques/ost6.mp3\";import ost7 from\"../Musiques/ost7.mp3\";import ost8 from\"../Musiques/ost8.mp3\";import ost9 from\"../Musiques/ost9.mp3\";import ost10 from\"../Musiques/ost10.mp3\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function MainPage(props){// states\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),isConnected=_useState2[0],setConnect=_useState2[1];var _useState3=useState(\"login_page\"),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),myLogin=_useState6[0],setMyLogin=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),playlists=_useState8[0],setPlaylists=_useState8[1];var audios=[ost0,ost1,ost2,ost3,ost4,ost5,ost6,ost7,ost8,ost9,ost10];// comportements\nvar getConnected=function getConnected(){setConnect(true);setCurrentPage(\"home_page\");};var setLogout=function setLogout(){setConnect(false);setCurrentPage(\"login_page\");};var handler=function handler(evt){evt.preventDefault();if(isConnected){setCurrentPage(\"home_page\");}else if(currentPage===\"register_page\"){setCurrentPage(\"login_page\");}else{setCurrentPage(\"register_page\");}};useEffect(function(){fetchPlaylists();},[currentPage]);var fetchPlaylists=function fetchPlaylists(){axios.get(\"playlist/get/all\",{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){console.log(res.data);setPlaylists(res.data.playlists);}).catch(function(err){console.log(err.response.data);});};var backgroundStyle={backgroundImage:\"url(\".concat(fond,\")\"),backgroundSize:\"cover\",backgroundPosition:\"center\",backgroundRepeat:\"no-repeat\",backgroundAttachment:\"fixed\",minHeight:\"100vh\"};// render\nreturn/*#__PURE__*/_jsxs(\"div\",{style:backgroundStyle,children:[/*#__PURE__*/_jsxs(\"header\",{className:\"beatadvisor\",children:[/*#__PURE__*/_jsx(BackgroundAudio,{sources:audios}),/*#__PURE__*/_jsx(\"a\",{className:\"logo\",href:\"a\",onClick:handler,children:/*#__PURE__*/_jsx(\"img\",{src:logo})}),/*#__PURE__*/_jsx(\"aside\",{children:/*#__PURE__*/_jsx(NavigationPanel,{myLogin:myLogin,setCurrentPage:setCurrentPage,currentPage:currentPage,setLogout:setLogout,isConnected:isConnected})})]}),/*#__PURE__*/_jsx(\"main\",{children:currentPage===\"register_page\"?/*#__PURE__*/_jsx(Register,{setCurrentPage:setCurrentPage}):isConnected?currentPage===\"home_page\"?/*#__PURE__*/_jsx(HomePage,{myLogin:myLogin,setCurrentPage:setCurrentPage}):currentPage===\"edit_page\"?/*#__PURE__*/_jsx(EditerProfil,{myLogin:myLogin,setMyLogin:setMyLogin,setCurrentPage:setCurrentPage}):currentPage===\"all_playlists_page\"?/*#__PURE__*/_jsxs(\"div\",{className:\"liste-playlists\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"En ce moment :\"}),/*#__PURE__*/_jsx(ListePlaylists,{userProfil:props.userProfil,myLogin:props.myLogin,setCurrentPage:setCurrentPage,playlists:playlists,setPlaylists:setPlaylists})]}):/*#__PURE__*/_jsx(PageProfil,{myLogin:myLogin,userProfil:currentPage,setCurrentPage:setCurrentPage,setLogout:setLogout,myPage:false}):/*#__PURE__*/_jsx(Login,{setMyLogin:setMyLogin,getConnected:getConnected,setCurrentPage:setCurrentPage})})]});}","map":{"version":3,"names":["useEffect","useState","logo","fond","axios","NavigationPanel","Login","Register","HomePage","PageProfil","EditerProfil","ListePlaylists","BackgroundAudio","ost0","ost1","ost2","ost3","ost4","ost5","ost6","ost7","ost8","ost9","ost10","jsx","_jsx","jsxs","_jsxs","MainPage","props","_useState","_useState2","_slicedToArray","isConnected","setConnect","_useState3","_useState4","currentPage","setCurrentPage","_useState5","_useState6","myLogin","setMyLogin","_useState7","_useState8","playlists","setPlaylists","audios","getConnected","setLogout","handler","evt","preventDefault","fetchPlaylists","get","headers","withCredentials","credentials","then","res","console","log","data","catch","err","response","backgroundStyle","backgroundImage","concat","backgroundSize","backgroundPosition","backgroundRepeat","backgroundAttachment","minHeight","style","children","className","sources","href","onClick","src","userProfil","myPage"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/MainPage.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"../CSS/styles.css\";\nimport \"../CSS/formulaire.css\";\nimport \"../CSS/message.css\";\nimport logo from \"../Images/BeatAdvisorLogo.png\";\nimport fond from \"../Images/fond.jpg\";\nimport axios from \"axios\";\n\nimport NavigationPanel from \"./NavigationPanel.js\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport HomePage from \"./HomePage\";\nimport PageProfil from \"./PageProfil\";\nimport EditerProfil from \"./EditerProfil\";\nimport ListePlaylists from \"./ListePlaylists\";\nimport BackgroundAudio from \"./BackgroundAudio.js\";\nimport ost0 from \"../Musiques/ost0.mp3\";\nimport ost1 from \"../Musiques/ost1.mp3\";\nimport ost2 from \"../Musiques/ost2.mp3\";\nimport ost3 from \"../Musiques/ost3.mp3\";\nimport ost4 from \"../Musiques/ost4.mp3\";\nimport ost5 from \"../Musiques/ost5.mp3\";\nimport ost6 from \"../Musiques/ost6.mp3\";\nimport ost7 from \"../Musiques/ost7.mp3\";\nimport ost8 from \"../Musiques/ost8.mp3\";\nimport ost9 from \"../Musiques/ost9.mp3\";\nimport ost10 from \"../Musiques/ost10.mp3\";\n\nexport default function MainPage(props) {\n  // states\n  const [isConnected, setConnect] = useState(false);\n  const [currentPage, setCurrentPage] = useState(\"login_page\");\n  const [myLogin, setMyLogin] = useState(\"\");\n  const [playlists, setPlaylists] = useState([]);\n  const audios = [\n    ost0,\n    ost1,\n    ost2,\n    ost3,\n    ost4,\n    ost5,\n    ost6,\n    ost7,\n    ost8,\n    ost9,\n    ost10,\n  ];\n\n  // comportements\n  const getConnected = () => {\n    setConnect(true);\n    setCurrentPage(\"home_page\");\n  };\n  const setLogout = () => {\n    setConnect(false);\n    setCurrentPage(\"login_page\");\n  };\n\n  const handler = (evt) => {\n    evt.preventDefault();\n    if (isConnected) {\n      setCurrentPage(\"home_page\");\n    } else if (currentPage === \"register_page\") {\n      setCurrentPage(\"login_page\");\n    } else {\n      setCurrentPage(\"register_page\");\n    }\n  };\n\n  useEffect(() => {\n    fetchPlaylists();\n  }, [currentPage]);\n\n  const fetchPlaylists = () => {\n    axios\n      .get(`playlist/get/all`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        console.log(res.data);\n        setPlaylists(res.data.playlists);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n\n  const backgroundStyle = {\n    backgroundImage: `url(${fond})`,\n    backgroundSize: \"cover\",\n    backgroundPosition: \"center\",\n    backgroundRepeat: \"no-repeat\",\n    backgroundAttachment: \"fixed\",\n    minHeight: \"100vh\",\n  };\n\n  // render\n  return (\n    <div style={backgroundStyle}>\n      <header className=\"beatadvisor\">\n        <BackgroundAudio sources={audios} />\n        <a className=\"logo\" href=\"a\" onClick={handler}>\n          <img src={logo} />\n        </a>\n        <aside>\n          <NavigationPanel\n            myLogin={myLogin}\n            setCurrentPage={setCurrentPage}\n            currentPage={currentPage}\n            setLogout={setLogout}\n            isConnected={isConnected}\n          />\n        </aside>\n      </header>\n      <main>\n        {currentPage === \"register_page\" ? (\n          <Register setCurrentPage={setCurrentPage} />\n        ) : isConnected ? (\n          currentPage === \"home_page\" ? (\n            <HomePage myLogin={myLogin} setCurrentPage={setCurrentPage} />\n          ) : currentPage === \"edit_page\" ? (\n            <EditerProfil\n              myLogin={myLogin}\n              setMyLogin={setMyLogin}\n              setCurrentPage={setCurrentPage}\n            />\n          ) : currentPage === \"all_playlists_page\" ? (\n            <div className=\"liste-playlists\">\n              <h2>En ce moment :</h2>\n              <ListePlaylists\n                userProfil={props.userProfil}\n                myLogin={props.myLogin}\n                setCurrentPage={setCurrentPage}\n                playlists={playlists}\n                setPlaylists={setPlaylists}\n              />\n            </div>\n          ) : (\n            <PageProfil\n              myLogin={myLogin}\n              userProfil={currentPage}\n              setCurrentPage={setCurrentPage}\n              setLogout={setLogout}\n              myPage={false}\n            />\n          )\n        ) : (\n          <Login\n            setMyLogin={setMyLogin}\n            getConnected={getConnected}\n            setCurrentPage={setCurrentPage}\n          />\n        )}\n      </main>\n    </div>\n  );\n}\n"],"mappings":"wLAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,mBAAmB,CAC1B,MAAO,uBAAuB,CAC9B,MAAO,oBAAoB,CAC3B,MAAO,CAAAC,IAAI,KAAM,+BAA+B,CAChD,MAAO,CAAAC,IAAI,KAAM,oBAAoB,CACrC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAEzB,MAAO,CAAAC,eAAe,KAAM,sBAAsB,CAClD,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,QAAQ,KAAM,YAAY,CACjC,MAAO,CAAAC,UAAU,KAAM,cAAc,CACrC,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,MAAO,CAAAC,cAAc,KAAM,kBAAkB,CAC7C,MAAO,CAAAC,eAAe,KAAM,sBAAsB,CAClD,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,IAAI,KAAM,sBAAsB,CACvC,MAAO,CAAAC,KAAK,KAAM,uBAAuB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,cAAe,SAAS,CAAAC,QAAQA,CAACC,KAAK,CAAE,CACtC;AACA,IAAAC,SAAA,CAAkC7B,QAAQ,CAAC,KAAK,CAAC,CAAA8B,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA1CG,WAAW,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAAsClC,QAAQ,CAAC,YAAY,CAAC,CAAAmC,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAArDE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAClC,IAAAG,UAAA,CAA8BtC,QAAQ,CAAC,EAAE,CAAC,CAAAuC,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnCE,OAAO,CAAAD,UAAA,IAAEE,UAAU,CAAAF,UAAA,IAC1B,IAAAG,UAAA,CAAkC1C,QAAQ,CAAC,EAAE,CAAC,CAAA2C,UAAA,CAAAZ,cAAA,CAAAW,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,GAAM,CAAAG,MAAM,CAAG,CACblC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,IAAI,CACJC,KAAK,CACN,CAED;AACA,GAAM,CAAAyB,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAA,CAAS,CACzBd,UAAU,CAAC,IAAI,CAAC,CAChBI,cAAc,CAAC,WAAW,CAAC,CAC7B,CAAC,CACD,GAAM,CAAAW,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACtBf,UAAU,CAAC,KAAK,CAAC,CACjBI,cAAc,CAAC,YAAY,CAAC,CAC9B,CAAC,CAED,GAAM,CAAAY,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,GAAG,CAAK,CACvBA,GAAG,CAACC,cAAc,EAAE,CACpB,GAAInB,WAAW,CAAE,CACfK,cAAc,CAAC,WAAW,CAAC,CAC7B,CAAC,IAAM,IAAID,WAAW,GAAK,eAAe,CAAE,CAC1CC,cAAc,CAAC,YAAY,CAAC,CAC9B,CAAC,IAAM,CACLA,cAAc,CAAC,eAAe,CAAC,CACjC,CACF,CAAC,CAEDtC,SAAS,CAAC,UAAM,CACdqD,cAAc,EAAE,CAClB,CAAC,CAAE,CAAChB,WAAW,CAAC,CAAC,CAEjB,GAAM,CAAAgB,cAAc,CAAG,QAAjB,CAAAA,cAAcA,CAAA,CAAS,CAC3BjD,KAAK,CACFkD,GAAG,oBAAqB,CACvBC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,eAAe,CAAE,IAAI,CACrBC,WAAW,CAAE,SACf,CAAC,CAAC,CACDC,IAAI,CAAC,SAACC,GAAG,CAAK,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAACG,IAAI,CAAC,CACrBhB,YAAY,CAACa,GAAG,CAACG,IAAI,CAACjB,SAAS,CAAC,CAClC,CAAC,CAAC,CACDkB,KAAK,CAAC,SAACC,GAAG,CAAK,CACdJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAACC,QAAQ,CAACH,IAAI,CAAC,CAChC,CAAC,CAAC,CACN,CAAC,CAED,GAAM,CAAAI,eAAe,CAAG,CACtBC,eAAe,QAAAC,MAAA,CAASjE,IAAI,KAAG,CAC/BkE,cAAc,CAAE,OAAO,CACvBC,kBAAkB,CAAE,QAAQ,CAC5BC,gBAAgB,CAAE,WAAW,CAC7BC,oBAAoB,CAAE,OAAO,CAC7BC,SAAS,CAAE,OACb,CAAC,CAED;AACA,mBACE9C,KAAA,QAAK+C,KAAK,CAAER,eAAgB,CAAAS,QAAA,eAC1BhD,KAAA,WAAQiD,SAAS,CAAC,aAAa,CAAAD,QAAA,eAC7BlD,IAAA,CAACb,eAAe,EAACiE,OAAO,CAAE9B,MAAO,EAAG,cACpCtB,IAAA,MAAGmD,SAAS,CAAC,MAAM,CAACE,IAAI,CAAC,GAAG,CAACC,OAAO,CAAE7B,OAAQ,CAAAyB,QAAA,cAC5ClD,IAAA,QAAKuD,GAAG,CAAE9E,IAAK,EAAG,EAChB,cACJuB,IAAA,UAAAkD,QAAA,cACElD,IAAA,CAACpB,eAAe,EACdoC,OAAO,CAAEA,OAAQ,CACjBH,cAAc,CAAEA,cAAe,CAC/BD,WAAW,CAAEA,WAAY,CACzBY,SAAS,CAAEA,SAAU,CACrBhB,WAAW,CAAEA,WAAY,EACzB,EACI,GACD,cACTR,IAAA,SAAAkD,QAAA,CACGtC,WAAW,GAAK,eAAe,cAC9BZ,IAAA,CAAClB,QAAQ,EAAC+B,cAAc,CAAEA,cAAe,EAAG,CAC1CL,WAAW,CACbI,WAAW,GAAK,WAAW,cACzBZ,IAAA,CAACjB,QAAQ,EAACiC,OAAO,CAAEA,OAAQ,CAACH,cAAc,CAAEA,cAAe,EAAG,CAC5DD,WAAW,GAAK,WAAW,cAC7BZ,IAAA,CAACf,YAAY,EACX+B,OAAO,CAAEA,OAAQ,CACjBC,UAAU,CAAEA,UAAW,CACvBJ,cAAc,CAAEA,cAAe,EAC/B,CACAD,WAAW,GAAK,oBAAoB,cACtCV,KAAA,QAAKiD,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAC9BlD,IAAA,OAAAkD,QAAA,CAAI,gBAAc,EAAK,cACvBlD,IAAA,CAACd,cAAc,EACbsE,UAAU,CAAEpD,KAAK,CAACoD,UAAW,CAC7BxC,OAAO,CAAEZ,KAAK,CAACY,OAAQ,CACvBH,cAAc,CAAEA,cAAe,CAC/BO,SAAS,CAAEA,SAAU,CACrBC,YAAY,CAAEA,YAAa,EAC3B,GACE,cAENrB,IAAA,CAAChB,UAAU,EACTgC,OAAO,CAAEA,OAAQ,CACjBwC,UAAU,CAAE5C,WAAY,CACxBC,cAAc,CAAEA,cAAe,CAC/BW,SAAS,CAAEA,SAAU,CACrBiC,MAAM,CAAE,KAAM,EAEjB,cAEDzD,IAAA,CAACnB,KAAK,EACJoC,UAAU,CAAEA,UAAW,CACvBM,YAAY,CAAEA,YAAa,CAC3BV,cAAc,CAAEA,cAAe,EAElC,EACI,GACH,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}