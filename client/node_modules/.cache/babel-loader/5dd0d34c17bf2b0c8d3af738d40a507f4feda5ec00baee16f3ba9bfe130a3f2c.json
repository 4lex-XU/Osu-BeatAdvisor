{"ast":null,"code":"import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),login=_useState2[0],setLogin=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var getLogin=function getLogin(evt){setLogin(evt.target.value);};var getPassword=function getPassword(evt){setPassword(evt.target.value);};var submissionHandler=function submissionHandler(evt){evt.preventDefault();setError(null);var data=new URLSearchParams();data.append(\"login\",login);data.append(\"password\",password);axios.post(\"/user/login\",data,{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},withCredentials:true,credentials:\"include\"}).then(function(response){console.log(response.data);props.setMyLogin(login);props.getConnected();props.setCurrentPage(\"home_page\");}).catch(function(error){console.log(error.response.data);setError(error.response.data);});};var registerHandler=function registerHandler(evt){evt.preventDefault();props.setCurrentPage(\"register_page\");};return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"30px\"},children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"login\",children:\"Nom d'utilisateur\"}),/*#__PURE__*/_jsx(\"input\",{id:\"login\",onChange:getLogin}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"mdp\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"mdp\",onChange:getPassword}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:submissionHandler,children:\"Me connecter\"})}),error&&/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[error.message,\" \",error.detail]}),/*#__PURE__*/_jsxs(\"span\",{children:[\"Pas encore inscrit ?\",/*#__PURE__*/_jsx(\"a\",{className:\"register\",href:\"a\",onClick:registerHandler,children:\"S'inscrire\"})]})]})});}","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","Login","props","_useState","_useState2","_slicedToArray","login","setLogin","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","getLogin","evt","target","value","getPassword","submissionHandler","preventDefault","data","URLSearchParams","append","post","headers","withCredentials","credentials","then","response","console","log","setMyLogin","getConnected","setCurrentPage","catch","registerHandler","style","marginTop","children","htmlFor","id","onChange","type","onClick","color","message","detail","className","href"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/Login.js"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function Login(props) {\n  const [login, setLogin] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(null);\n\n  const getLogin = (evt) => {\n    setLogin(evt.target.value);\n  };\n  const getPassword = (evt) => {\n    setPassword(evt.target.value);\n  };\n\n  const submissionHandler = (evt) => {\n    evt.preventDefault();\n    setError(null);\n    const data = new URLSearchParams();\n    data.append(\"login\", login);\n    data.append(\"password\", password);\n    axios\n      .post(\"/user/login\", data, {\n        headers: {\n          \"Content-Type\": \"application/x-www-form-urlencoded\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((response) => {\n        console.log(response.data);\n        props.setMyLogin(login);\n        props.getConnected();\n        props.setCurrentPage(\"home_page\");\n      })\n      .catch((error) => {\n        console.log(error.response.data);\n        setError(error.response.data);\n      });\n  };\n  const registerHandler = (evt) => {\n    evt.preventDefault();\n    props.setCurrentPage(\"register_page\");\n  };\n  return (\n    <div style={{ marginTop: \"30px\" }}>\n      <form>\n        <label htmlFor=\"login\">Nom d'utilisateur</label>\n        <input id=\"login\" onChange={getLogin} />\n        <label htmlFor=\"mdp\">Mot de passe</label>\n        <input type=\"password\" id=\"mdp\" onChange={getPassword} />\n        <div>\n          <button onClick={submissionHandler}>Me connecter</button>\n        </div>\n        {error && (\n          <p style={{ color: \"red\" }}>\n            {error.message} {error.detail}\n          </p>\n        )}\n        <span>\n          Pas encore inscrit ?\n          <a className=\"register\" href=\"a\" onClick={registerHandler}>\n            S'inscrire\n          </a>\n        </span>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}