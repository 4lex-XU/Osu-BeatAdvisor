{"ast":null,"code":"import _slicedToArray from \"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nvar _jsxFileName = \"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/BackgroundAudio.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BackgroundAudio(_ref) {\n  _s();\n  var sources = _ref.sources;\n  var _useState = useState(0),\n    _useState2 = _slicedToArray(_useState, 2),\n    currentIndex = _useState2[0],\n    setCurrentIndex = _useState2[1];\n  var _useState3 = useState(false),\n    _useState4 = _slicedToArray(_useState3, 2),\n    playStarted = _useState4[0],\n    setPlayStarted = _useState4[1]; // État pour gérer si la lecture a commencé\n  var audioRef = useRef(null);\n  useEffect(function () {\n    if (playStarted && audioRef.current) {\n      audioRef.current.play().catch(function (error) {\n        return console.error(\"Error playing audio:\", error);\n      });\n      var handleEnded = function handleEnded() {\n        setCurrentIndex(function (prevIndex) {\n          return (prevIndex + 1) % sources.length;\n        });\n      };\n      audioRef.current.addEventListener(\"ended\", handleEnded);\n      return function () {\n        return audioRef.current.removeEventListener(\"ended\", handleEnded);\n      };\n    }\n  }, [currentIndex, playStarted, sources]);\n  var startPlayback = function startPlayback() {\n    setPlayStarted(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"absolute\",\n      left: \"-9999px\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n      ref: audioRef,\n      src: sources[currentIndex],\n      loop: sources.length === 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), !playStarted && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-music\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content-music\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Bienvenue sur BeatAdvisor!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ici, vous pourrez g\\xE9n\\xE9rer de nombreuses playlists pour vos sessions sur Osu!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startPlayback,\n          children: [\"Autoriser la musique de fond\", \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 28,\n    columnNumber: 5\n  }, this);\n}\n_s(BackgroundAudio, \"62OrUCslbuXrOIu9r5aJ9McwJrs=\");\n_c = BackgroundAudio;\nexport default BackgroundAudio;\nvar _c;\n$RefreshReg$(_c, \"BackgroundAudio\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","BackgroundAudio","_ref","_s","sources","_useState","_useState2","_slicedToArray","currentIndex","setCurrentIndex","_useState3","_useState4","playStarted","setPlayStarted","audioRef","current","play","catch","error","console","handleEnded","prevIndex","length","addEventListener","removeEventListener","startPlayback","style","position","left","children","ref","src","loop","fileName","_jsxFileName","lineNumber","columnNumber","className","onClick","_c","$RefreshReg$"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/BackgroundAudio.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nfunction BackgroundAudio({ sources }) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [playStarted, setPlayStarted] = useState(false); // État pour gérer si la lecture a commencé\n  const audioRef = useRef(null);\n\n  useEffect(() => {\n    if (playStarted && audioRef.current) {\n      audioRef.current\n        .play()\n        .catch((error) => console.error(\"Error playing audio:\", error));\n      const handleEnded = () => {\n        setCurrentIndex((prevIndex) => (prevIndex + 1) % sources.length);\n      };\n\n      audioRef.current.addEventListener(\"ended\", handleEnded);\n\n      return () => audioRef.current.removeEventListener(\"ended\", handleEnded);\n    }\n  }, [currentIndex, playStarted, sources]);\n\n  const startPlayback = () => {\n    setPlayStarted(true);\n  };\n\n  return (\n    <div style={{ position: \"absolute\", left: \"-9999px\" }}>\n      <audio\n        ref={audioRef}\n        src={sources[currentIndex]}\n        loop={sources.length === 1}\n      />\n      {!playStarted && (\n        <div className=\"modal-music\">\n          <div className=\"modal-content-music\">\n            <h4>Bienvenue sur BeatAdvisor!</h4>\n            <p>\n              Ici, vous pourrez générer de nombreuses playlists pour vos\n              sessions sur Osu!\n            </p>\n            <button onClick={startPlayback}>\n              Autoriser la musique de fond{\" \"}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default BackgroundAudio;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}