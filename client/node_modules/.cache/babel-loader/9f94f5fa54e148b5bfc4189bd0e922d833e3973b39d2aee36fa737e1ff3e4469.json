{"ast":null,"code":"import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{faTrash}from\"@fortawesome/free-solid-svg-icons\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Message(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isMenuOpen=_useState2[0],setMenuOpen=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),isAbonne=_useState4[0],setIsAbonne=_useState4[1];// PERMET DE CHANGER DE PAGE\nvar pageProfilHandler=function pageProfilHandler(evt){evt.preventDefault();props.setCurrentPage(props.author);};// PERMET D'OUVRIR UN MENU D'OPTION SUR UN MESSAGE\nvar toggleMenu=function toggleMenu(){setMenuOpen(!isMenuOpen);};// PERMET DE SUPPRIMER UN MESSAGE\nvar deleteMessage=function deleteMessage(evt){evt.preventDefault();axios.delete(\"/user/\".concat(props.id,\"/messages\"),{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){console.log(res.data);props.setCommentaires(props.commentaires.filter(function(commentaire){return commentaire.Id!==props.Id;}));}).catch(function(err){console.log(err.response.data);});};// Au chargement de la page, on détermine si l'utilisateur est abonné au profil\nuseEffect(function(){axios.get(\"/user/\".concat(props.myLogin,\"/friends/\").concat(props.login),{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){setIsAbonne(res.data);}).catch(function(err){console.log(err.response.data);});},[isAbonne,props.author]);// Permet de suivre un profil\nvar Follow=function Follow(evt){evt.preventDefault();var data={friend_login:props.author};axios.put(\"/user/\".concat(props.myLogin,\"/newfriend\"),data,{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){console.log(res.data);setIsAbonne(true);}).catch(function(err){console.log(err.response.data);});};// Permet de ne plus suivre un profil\nvar unFollow=function unFollow(evt){evt.preventDefault();axios.delete(\"/user/\".concat(props.myLogin,\"/friends/\").concat(props.author),{headers:{\"Content-Type\":\"application/json\"},withCredentials:true,credentials:\"include\"}).then(function(res){console.log(res.data);setIsAbonne(false);}).catch(function(err){console.log(err.response.data);});};return/*#__PURE__*/_jsxs(\"article\",{className:\"message\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"a\",{className:\"user\",href:\"a\",onClick:pageProfilHandler,children:props.author}),/*#__PURE__*/_jsx(\"button\",{className:\"menuBurger\",onClick:toggleMenu,children:\"...\"}),isMenuOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"menuList\",children:props.myLogin===props.author?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:deleteMessage,children:/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash})})}):/*#__PURE__*/_jsx(\"div\",{children:isAbonne===false?/*#__PURE__*/_jsx(\"button\",{onClick:Follow,children:\"Suivre\"}):/*#__PURE__*/_jsx(\"button\",{onClick:unFollow,children:\"Ne plus suivre\"})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"texte-msg\",rows:\"5\",cols:\"33\",readOnly:\"readonly\",value:props.text})}),/*#__PURE__*/_jsx(\"p\",{className:\"date\",children:props.date})]});}","map":{"version":3,"names":["React","useEffect","useState","faTrash","FontAwesomeIcon","axios","jsx","_jsx","jsxs","_jsxs","Message","props","_useState","_useState2","_slicedToArray","isMenuOpen","setMenuOpen","_useState3","_useState4","isAbonne","setIsAbonne","pageProfilHandler","evt","preventDefault","setCurrentPage","author","toggleMenu","deleteMessage","delete","concat","id","headers","withCredentials","credentials","then","res","console","log","data","setCommentaires","commentaires","filter","commentaire","Id","catch","err","response","get","myLogin","login","Follow","friend_login","put","unFollow","className","children","href","onClick","icon","rows","cols","readOnly","value","text","date"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/Message.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport axios from \"axios\";\n\nexport default function Message(props) {\n  const [isMenuOpen, setMenuOpen] = useState(false);\n  const [isAbonne, setIsAbonne] = useState(null);\n\n  // PERMET DE CHANGER DE PAGE\n  const pageProfilHandler = (evt) => {\n    evt.preventDefault();\n    props.setCurrentPage(props.author);\n  };\n\n  // PERMET D'OUVRIR UN MENU D'OPTION SUR UN MESSAGE\n  const toggleMenu = () => {\n    setMenuOpen(!isMenuOpen);\n  };\n\n  // PERMET DE SUPPRIMER UN MESSAGE\n  const deleteMessage = (evt) => {\n    evt.preventDefault();\n    axios\n      .delete(`/user/${props.id}/messages`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        console.log(res.data);\n        props.setCommentaires(\n          props.commentaires.filter(\n            (commentaire) => commentaire.Id !== props.Id,\n          ),\n        );\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n\n  // Au chargement de la page, on détermine si l'utilisateur est abonné au profil\n  useEffect(() => {\n    axios\n      .get(`/user/${props.myLogin}/friends/${props.login}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        setIsAbonne(res.data);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  }, [isAbonne, props.author]);\n\n  // Permet de suivre un profil\n  const Follow = (evt) => {\n    evt.preventDefault();\n    const data = {\n      friend_login: props.author,\n    };\n    axios\n      .put(`/user/${props.myLogin}/newfriend`, data, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        console.log(res.data);\n        setIsAbonne(true);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n\n  // Permet de ne plus suivre un profil\n  const unFollow = (evt) => {\n    evt.preventDefault();\n    axios\n      .delete(`/user/${props.myLogin}/friends/${props.author}`, {\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        withCredentials: true,\n        credentials: \"include\",\n      })\n      .then((res) => {\n        console.log(res.data);\n        setIsAbonne(false);\n      })\n      .catch((err) => {\n        console.log(err.response.data);\n      });\n  };\n\n  return (\n    <article className=\"message\">\n      <div>\n        <a className=\"user\" href=\"a\" onClick={pageProfilHandler}>\n          {props.author}\n        </a>\n        <button className=\"menuBurger\" onClick={toggleMenu}>\n          ...\n        </button>\n        {isMenuOpen && (\n          <div className=\"menuList\">\n            {props.myLogin === props.author ? (\n              <div>\n                <button onClick={deleteMessage}>\n                  <FontAwesomeIcon icon={faTrash} />\n                </button>\n              </div>\n            ) : (\n              <div>\n                {isAbonne === false ? (\n                  <button onClick={Follow}>Suivre</button>\n                ) : (\n                  <button onClick={unFollow}>Ne plus suivre</button>\n                )}\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n      <div className=\"content\">\n        <textarea\n          className=\"texte-msg\"\n          rows=\"5\"\n          cols=\"33\"\n          readOnly=\"readonly\"\n          value={props.text}\n        />\n      </div>\n      <p className=\"date\">{props.date}</p>\n    </article>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}