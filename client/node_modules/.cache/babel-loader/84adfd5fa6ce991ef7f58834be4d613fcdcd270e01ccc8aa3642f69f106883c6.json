{"ast":null,"code":"import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Register(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),pseudo=_useState4[0],setPseudo=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),passOK=_useState6[0],setPassOK=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),pass=_useState8[0],setPass=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),passVerif=_useState10[0],setPassVerif=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var getEmail=function getEmail(evt){setEmail(evt.target.value);};var getPseudo=function getPseudo(evt){setPseudo(evt.target.value);};var getPass=function getPass(evt){setPass(evt.target.value);};var getPassVerif=function getPassVerif(evt){setPassVerif(evt.target.value);};var submissionHandler=function submissionHandler(evt){if(pass===passVerif)setPassOK(false);else setPassOK(true);evt.preventDefault();setError(null);if(!passOK){var data=new URLSearchParams();data.append(\"email\",email);data.append(\"pseudo\",pseudo);data.append(\"password\",pass);console.log(data);axios.put(\"/user/register\",data,{headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"}}).then(function(response){console.log(response.data);props.setCurrentPage(\"login_page\");}).catch(function(error){console.log(error.response.data);setError(error.response.data);});}};var loginHandler=function loginHandler(evt){evt.preventDefault();props.setCurrentPage(\"login_page\");};return/*#__PURE__*/_jsx(\"div\",{style:{marginTop:\"30px\"},children:/*#__PURE__*/_jsxs(\"form\",{name:\"register\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pseudo\",children:\"Nom d'utilisateur\"}),/*#__PURE__*/_jsx(\"input\",{id:\"pseudo\",onChange:getPseudo}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"register_login\",children:\"Adresse e-mail\"}),/*#__PURE__*/_jsx(\"input\",{id:\"register_login\",onChange:getEmail}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"register_mdp1\",children:\"Mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"register_mdp1\",onChange:getPass}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"register_mdp2\",children:\"Confirmez le mot de passe\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"register_mdp2\",onChange:getPassVerif}),passOK&&/*#__PURE__*/_jsx(\"p\",{style:{color:\"red\"},children:\"Veuillez reconfirmer le mot de passe\"}),error&&/*#__PURE__*/_jsxs(\"p\",{style:{color:\"red\"},children:[error.message,\" \",error.detail]}),/*#__PURE__*/_jsx(\"div\",{className:\"register-input\",children:/*#__PURE__*/_jsx(\"button\",{onClick:submissionHandler,children:\"M'inscrire\"})}),/*#__PURE__*/_jsxs(\"span\",{children:[\"D\\xE9j\\xE0 inscrit ?\",/*#__PURE__*/_jsx(\"a\",{className:\"connexion\",href:\"a\",onClick:loginHandler,children:\"Me connecter\"})]})]})});}","map":{"version":3,"names":["useState","axios","jsx","_jsx","jsxs","_jsxs","Register","props","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","pseudo","setPseudo","_useState5","_useState6","passOK","setPassOK","_useState7","_useState8","pass","setPass","_useState9","_useState10","passVerif","setPassVerif","_useState11","_useState12","error","setError","getEmail","evt","target","value","getPseudo","getPass","getPassVerif","submissionHandler","preventDefault","data","URLSearchParams","append","console","log","put","headers","then","response","setCurrentPage","catch","loginHandler","style","marginTop","children","name","htmlFor","id","onChange","type","color","message","detail","className","onClick","href"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/Register.js"],"sourcesContent":["import { useState } from \"react\";\nimport axios from \"axios\";\n\nexport default function Register(props) {\n  const [email, setEmail] = useState(\"\");\n  const [pseudo, setPseudo] = useState(\"\");\n  const [passOK, setPassOK] = useState(false);\n  const [pass, setPass] = useState(\"\");\n  const [passVerif, setPassVerif] = useState(\"\");\n  const [error, setError] = useState(null);\n\n  const getEmail = (evt) => {\n    setEmail(evt.target.value);\n  };\n  const getPseudo = (evt) => {\n    setPseudo(evt.target.value);\n  };\n  const getPass = (evt) => {\n    setPass(evt.target.value);\n  };\n  const getPassVerif = (evt) => {\n    setPassVerif(evt.target.value);\n  };\n  const submissionHandler = (evt) => {\n    if (pass === passVerif) setPassOK(false);\n    else setPassOK(true);\n    evt.preventDefault();\n    setError(null);\n    if (!passOK) {\n      const data = new URLSearchParams();\n      data.append(\"email\", email);\n      data.append(\"pseudo\", pseudo);\n      data.append(\"password\", pass);\n      console.log(data);\n      axios\n        .put(\"/user/register\", data, {\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\",\n          },\n        })\n        .then((response) => {\n          console.log(response.data);\n          props.setCurrentPage(\"login_page\");\n        })\n        .catch((error) => {\n          console.log(error.response.data);\n          setError(error.response.data);\n        });\n    }\n  };\n\n  const loginHandler = (evt) => {\n    evt.preventDefault();\n    props.setCurrentPage(\"login_page\");\n  };\n\n  return (\n    <div style={{ marginTop: \"30px\" }}>\n      <form name=\"register\">\n        <label htmlFor=\"pseudo\">Nom d'utilisateur</label>\n        <input id=\"pseudo\" onChange={getPseudo} />\n        <label htmlFor=\"register_login\">Adresse e-mail</label>\n        <input id=\"register_login\" onChange={getEmail} />\n        <label htmlFor=\"register_mdp1\">Mot de passe</label>\n        <input type=\"password\" id=\"register_mdp1\" onChange={getPass} />\n        <label htmlFor=\"register_mdp2\">Confirmez le mot de passe</label>\n        <input type=\"password\" id=\"register_mdp2\" onChange={getPassVerif} />\n        {passOK && (\n          <p style={{ color: \"red\" }}>Veuillez reconfirmer le mot de passe</p>\n        )}\n        {error && (\n          <p style={{ color: \"red\" }}>\n            {error.message} {error.detail}\n          </p>\n        )}\n        <div className=\"register-input\">\n          <button onClick={submissionHandler}>M'inscrire</button>\n        </div>\n        <span>\n          Déjà inscrit ?\n          <a className=\"connexion\" href=\"a\" onClick={loginHandler}>\n            Me connecter\n          </a>\n        </span>\n      </form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}