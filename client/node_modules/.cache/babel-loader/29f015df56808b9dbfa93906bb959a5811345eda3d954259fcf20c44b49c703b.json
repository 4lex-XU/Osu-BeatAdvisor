{"ast":null,"code":"import _slicedToArray from\"/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function BackgroundAudio(_ref){var sources=_ref.sources;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentIndex=_useState2[0],setCurrentIndex=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),playStarted=_useState4[0],setPlayStarted=_useState4[1];// État pour gérer si la lecture a commencé\nvar audioRef=useRef(null);useEffect(function(){if(playStarted&&audioRef.current){audioRef.current.play().catch(function(error){return console.error(\"Error playing audio:\",error);});var handleEnded=function handleEnded(){setCurrentIndex(function(prevIndex){return(prevIndex+1)%sources.length;});};audioRef.current.addEventListener(\"ended\",handleEnded);return function(){return audioRef.current.removeEventListener(\"ended\",handleEnded);};}},[currentIndex,playStarted,sources]);var startPlayback=function startPlayback(){setPlayStarted(true);};return/*#__PURE__*/_jsxs(\"div\",{style:{position:\"absolute\",left:\"-9999px\"},children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:sources[currentIndex],loop:sources.length===1}),!playStarted&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-music\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content-music\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Bienvenue sur BeatAdvisor!\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Ici, vous pourrez g\\xE9n\\xE9rer de nombreuses playlists pour vos sessions sur Osu!\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:startPlayback,children:[\"Autoriser la musique de fond\",\" \"]})]})})]});}export default BackgroundAudio;","map":{"version":3,"names":["React","useEffect","useRef","useState","jsx","_jsx","jsxs","_jsxs","BackgroundAudio","_ref","sources","_useState","_useState2","_slicedToArray","currentIndex","setCurrentIndex","_useState3","_useState4","playStarted","setPlayStarted","audioRef","current","play","catch","error","console","handleEnded","prevIndex","length","addEventListener","removeEventListener","startPlayback","style","position","left","children","ref","src","loop","className","onClick"],"sources":["/home/maarc/Fac/STL/S3/TPALT/osuProject/Osu-BeatAdvisor/client/src/Composants/BackgroundAudio.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nfunction BackgroundAudio({ sources }) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n  const [playStarted, setPlayStarted] = useState(false); // État pour gérer si la lecture a commencé\n  const audioRef = useRef(null);\n\n  useEffect(() => {\n    if (playStarted && audioRef.current) {\n      audioRef.current\n        .play()\n        .catch((error) => console.error(\"Error playing audio:\", error));\n      const handleEnded = () => {\n        setCurrentIndex((prevIndex) => (prevIndex + 1) % sources.length);\n      };\n\n      audioRef.current.addEventListener(\"ended\", handleEnded);\n\n      return () => audioRef.current.removeEventListener(\"ended\", handleEnded);\n    }\n  }, [currentIndex, playStarted, sources]);\n\n  const startPlayback = () => {\n    setPlayStarted(true);\n  };\n\n  return (\n    <div style={{ position: \"absolute\", left: \"-9999px\" }}>\n      <audio\n        ref={audioRef}\n        src={sources[currentIndex]}\n        loop={sources.length === 1}\n      />\n      {!playStarted && (\n        <div className=\"modal-music\">\n          <div className=\"modal-content-music\">\n            <h4>Bienvenue sur BeatAdvisor!</h4>\n            <p>\n              Ici, vous pourrez générer de nombreuses playlists pour vos\n              sessions sur Osu!\n            </p>\n            <button onClick={startPlayback}>\n              Autoriser la musique de fond{\" \"}\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default BackgroundAudio;\n"],"mappings":"wLAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE3D,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAc,IAAX,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CAChC,IAAAC,SAAA,CAAwCR,QAAQ,CAAC,CAAC,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA5CG,YAAY,CAAAF,UAAA,IAAEG,eAAe,CAAAH,UAAA,IACpC,IAAAI,UAAA,CAAsCb,QAAQ,CAAC,KAAK,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAA9CE,WAAW,CAAAD,UAAA,IAAEE,cAAc,CAAAF,UAAA,IAAqB;AACvD,GAAM,CAAAG,QAAQ,CAAGlB,MAAM,CAAC,IAAI,CAAC,CAE7BD,SAAS,CAAC,UAAM,CACd,GAAIiB,WAAW,EAAIE,QAAQ,CAACC,OAAO,CAAE,CACnCD,QAAQ,CAACC,OAAO,CACbC,IAAI,EAAE,CACNC,KAAK,CAAC,SAACC,KAAK,QAAK,CAAAC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,GAAC,CACjE,GAAM,CAAAE,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAA,CAAS,CACxBX,eAAe,CAAC,SAACY,SAAS,QAAK,CAACA,SAAS,CAAG,CAAC,EAAIjB,OAAO,CAACkB,MAAM,GAAC,CAClE,CAAC,CAEDR,QAAQ,CAACC,OAAO,CAACQ,gBAAgB,CAAC,OAAO,CAAEH,WAAW,CAAC,CAEvD,MAAO,kBAAM,CAAAN,QAAQ,CAACC,OAAO,CAACS,mBAAmB,CAAC,OAAO,CAAEJ,WAAW,CAAC,GACzE,CACF,CAAC,CAAE,CAACZ,YAAY,CAAEI,WAAW,CAAER,OAAO,CAAC,CAAC,CAExC,GAAM,CAAAqB,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC1BZ,cAAc,CAAC,IAAI,CAAC,CACtB,CAAC,CAED,mBACEZ,KAAA,QAAKyB,KAAK,CAAE,CAAEC,QAAQ,CAAE,UAAU,CAAEC,IAAI,CAAE,SAAU,CAAE,CAAAC,QAAA,eACpD9B,IAAA,UACE+B,GAAG,CAAEhB,QAAS,CACdiB,GAAG,CAAE3B,OAAO,CAACI,YAAY,CAAE,CAC3BwB,IAAI,CAAE5B,OAAO,CAACkB,MAAM,GAAK,CAAE,EAC3B,CACD,CAACV,WAAW,eACXb,IAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAJ,QAAA,cAC1B5B,KAAA,QAAKgC,SAAS,CAAC,qBAAqB,CAAAJ,QAAA,eAClC9B,IAAA,OAAA8B,QAAA,CAAI,4BAA0B,EAAK,cACnC9B,IAAA,MAAA8B,QAAA,CAAG,oFAGH,EAAI,cACJ5B,KAAA,WAAQiC,OAAO,CAAET,aAAc,CAAAI,QAAA,EAAC,8BACF,CAAC,GAAG,GACzB,GACL,EAET,GACG,CAEV,CAEA,cAAe,CAAA3B,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}